---
layout: tutorial
title: Leaflet on Mobile
---

<h3>Leaflet on Mobile</h3>

<p>In this example, you'll learn how to create a fullscreen map tuned for mobile devices like iPhone, iPad or Android phones, and how to easily detect and use the current user location.</p>

<p><a href="mobile-example.html">View example in fullscreen &rarr;</a></p>

<h3>Preparing the page</h3>

<p>First we'll take a look at the HTML &amp; CSS code of the page. To make our map <code>div</code> element stretch to all available space (fullscreen), we can use the following CSS code:</p>

<pre><code class="css">body {
	padding: 0;
	margin: 0;
}
html, body, #map {
	height: 100%;
}</code></pre>

<p>Also, we need to tell the mobile browser to disable unwanted scaling of the page and set it to its actual size by placing the following line in the <code>head</code> section or our HTML page:</p>

<pre><code class="html">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /&gt;</code></pre>

<h3>Initializing the map</h3>

<p>We'll now initialize the map in the JavaScript code exactly like we did in the <a href="quick-start">quick start guide</a>, but won't set the map view yet:</p>

<pre><code class="javascript">var map = L.map('map');

L.tileLayer('http://{s}.tile.cloudmade.com/<a href="http://cloudmade.com/register">API-key</a>/997/256/{z}/{x}/{y}.png', {
	attribution: 'Map data &amp;copy; <span class="text-cut" data-cut="[&hellip;]">&lt;a href="http://openstreetmap.org"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href="http://creativecommons.org/licenses/by-sa/2.0/"&gt;CC-BY-SA&lt;/a&gt;, Imagery &copy; &lt;a href="http://cloudmade.com"&gt;CloudMade&lt;/a&gt;</span>',
	maxZoom: 18
}).addTo(map);</code></pre>

<h3>Geolocation</h3>

<p>Leaflet has a very handy shortcut for zooming the map view to the detected location &mdash; <code>locate</code> method with the <code>setView</code> option, replacing the usual <code>setView</code> method in the code:</p>

<pre><code class="javascript">map.locate({setView: true, maxZoom: 16});</code></pre>

<p>Here we specify 16 as the maximum zoom when setting the map view automatically. As soon as the user agrees to share its location and it's detected by the browser, the map will set the view to it. Now we have a working fullscreen mobile map! But what if we need to do something after the geolocation completed? Here's what the <code>locationfound</code> and <code>locationerror</code> events are for. Let's for example add a marker in the detected location, showing accuracy in a popup, by adding an event listener to <code>locationfound</code> event before the <code>locateAndSetView</code> call:</p>

<pre><code class="javascript">function onLocationFound(e) {
	var radius = e.accuracy / 2;

	L.marker(e.latlng).addTo(map)
		.bindPopup("You are within " + radius + " meters from this point").openPopup();

	L.circle(e.latlng, radius).addTo(map);
}

map.on('locationfound', onLocationFound);
</code></pre>

<p>Excellent! But it would also be nice to show an error message if the geolocation failed:</p>

<pre><code class="javascript">function onLocationError(e) {
	alert(e.message);
}

map.on('locationerror', onLocationError);
</code></pre>

<p>If you have <code>setView</code> option set to true and the geolocation failed, it will set the view to the whole world.</p>

<p>Now the example is complete &mdash; try it on your mobile phone: <a target="_blank" href="mobile-example.html">View the full example &rarr;</a></p>

<p>Next steps would be to take a look at the detailed <a href="../reference.html">documentation</a> and browse <a href="../examples.html">other examples</a>.</p>
